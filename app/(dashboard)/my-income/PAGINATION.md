# 我的收入页面 - 增强分页功能说明

## 📋 功能概览

"我的收入"页面现在拥有完整的分页功能，支持多种操作方式，方便用户浏览大量数据。

## ✨ 主要功能

### 1. 每页显示数量选择 ⭐
- **可选项**: 10条、20条、50条、100条
- **位置**: 分页控制器左侧
- **交互**: 下拉选择
- **效果**: 改变后自动重置到第一页

```
每页 [20▼] 条
```

### 2. 智能页码显示 ⭐⭐
- **当前页突出显示**：使用主题色背景
- **智能省略**：页数多时自动显示省略号 (...)
- **显示规则**：
  - 总页数 ≤ 7：显示全部页码
  - 总页数 > 7：显示首页、末页、当前页及前后各1页

```
示例1 (总5页):    [1] [2] [3] [4] [5]
示例2 (总20页):   [1] [...] [8] [9] [10] [...] [20]
```

### 3. 快速导航按钮 ⭐⭐⭐
- **首页** (⏮): 跳转到第1页
- **上一页** (◀): 返回上一页
- **页码**: 点击直接跳转
- **下一页** (▶): 前进下一页
- **末页** (⏭): 跳转到最后一页

```
[⏮] [◀] [1] ... [5] [6] [7] ... [20] [▶] [⏭]
```

### 4. 页码跳转功能 ⭐⭐
- **输入框**: 直接输入目标页码
- **跳转按钮**: 点击执行跳转
- **回车快捷键**: 在输入框按 Enter 跳转
- **验证**: 自动检查页码合法性

```
跳转到 [___] 页 [跳转] （共 10 页）
```

### 5. 记录统计信息 ⭐
- **总记录数**: 显示筛选后的总数
- **当前范围**: 显示当前页的记录范围
- **实时更新**: 随筛选条件动态变化

```
共 45 条记录，显示第 21 - 40 条
```

## 🎨 UI 布局

### 桌面端布局
```
┌─────────────────────────────────────────────────────────────┐
│ 共45条记录，显示第21-40条   每页[20▼]条                       │
│                                                               │
│                     [⏮][◀][1]...[3][4][5]...[10][▶][⏭]      │
└─────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────┐
│              跳转到 [___] 页 [跳转] （共 10 页）              │
└─────────────────────────────────────────────────────────────┘
```

### 移动端布局
```
┌──────────────────────────────┐
│ 共45条记录，显示第21-40条      │
│ 每页 [20▼] 条                │
├──────────────────────────────┤
│   [⏮][◀][3][4][5][▶][⏭]     │
├──────────────────────────────┤
│ 跳转到 [__] 页 [跳转]        │
│      （共 10 页）             │
└──────────────────────────────┘
```

## 🔧 技术实现

### 状态管理
```typescript
const [currentPage, setCurrentPage] = useState(1)     // 当前页码
const [pageSize, setPageSize] = useState(20)          // 每页数量
const [jumpToPage, setJumpToPage] = useState('')      // 跳转输入
```

### 分页计算
```typescript
// 计算总页数
const totalPages = Math.ceil(filteredRecords.length / pageSize)

// 获取当前页数据
const paginatedRecords = useMemo(() => {
  const startIndex = (currentPage - 1) * pageSize
  return filteredRecords.slice(startIndex, startIndex + pageSize)
}, [filteredRecords, currentPage, pageSize])
```

### 智能页码生成
```typescript
const getPageNumbers = () => {
  const pages: (number | string)[] = []
  const maxVisible = 7
  
  if (totalPages <= maxVisible) {
    // 显示全部
    for (let i = 1; i <= totalPages; i++) {
      pages.push(i)
    }
  } else {
    // 智能显示
    pages.push(1)
    if (currentPage > 3) pages.push('...')
    
    const start = Math.max(2, currentPage - 1)
    const end = Math.min(totalPages - 1, currentPage + 1)
    for (let i = start; i <= end; i++) {
      pages.push(i)
    }
    
    if (currentPage < totalPages - 2) pages.push('...')
    pages.push(totalPages)
  }
  
  return pages
}
```

## 📱 响应式设计

### 桌面端 (≥ 640px)
- 统计信息和控制器横向排列
- 显示完整的页码按钮
- 跳转功能独立一行

### 移动端 (< 640px)
- 统计信息和控制器纵向堆叠
- 页码按钮适当减少
- 跳转输入框缩小

## 🎯 使用场景

### 场景1: 浏览少量数据 (< 20条)
- **效果**: 不显示分页控制器
- **体验**: 数据一次性全部展示

### 场景2: 浏览中等数据 (20-100条)
- **推荐**: 使用默认每页20条
- **操作**: 使用页码按钮切换

### 场景3: 浏览大量数据 (> 100条)
- **推荐**: 调整为每页50条或100条
- **操作**: 使用跳转功能快速定位

### 场景4: 查找特定记录
1. 使用筛选条件缩小范围
2. 调整每页显示数量
3. 使用页码跳转定位

## ⚡ 快捷操作

| 操作 | 方式 | 说明 |
|------|------|------|
| 首页 | 点击 ⏮ 按钮 | 立即跳到第1页 |
| 上一页 | 点击 ◀ 按钮 | 向前翻一页 |
| 下一页 | 点击 ▶ 按钮 | 向后翻一页 |
| 末页 | 点击 ⏭ 按钮 | 立即跳到最后一页 |
| 指定页 | 点击页码数字 | 直接跳转到该页 |
| 快速跳转 | 输入页码+回车 | 快速定位 |
| 改变页大小 | 选择下拉选项 | 调整每页数量 |

## 🔔 提示信息

功能会通过 Toast 提示用户操作结果：

- ✅ **成功**: "已调整为每页显示 50 条"
- ✅ **跳转成功**: "已跳转到第 5 页"
- ❌ **错误**: "请输入 1-10 之间的页码"

## 🎨 样式特点

### 当前页高亮
- 背景色：主题色
- 文字色：白色
- 不可点击

### 禁用状态
- 按钮置灰
- 光标变为禁止图标
- 不响应点击

### 悬停效果
- 按钮背景色变化
- 光标变为手型
- 过渡动画

## 💡 最佳实践

### 用户体验
1. **默认设置合理**：每页20条适合大多数场景
2. **操作反馈及时**：每次操作都有Toast提示
3. **状态持久化**：筛选后页码重置，避免空白页

### 性能优化
1. **使用 useMemo**：避免不必要的重新计算
2. **虚拟化分页**：只渲染当前页数据
3. **智能页码**：大数据量时自动折叠页码

### 可访问性
1. **键盘导航**：跳转输入框支持回车键
2. **禁用状态**：首页/末页时按钮自动禁用
3. **清晰提示**：明确的文字说明和图标

## 🔮 未来增强

可考虑添加的功能：

1. **记忆功能**: 记住用户选择的每页数量
2. **URL 同步**: 页码同步到 URL，支持分享链接
3. **批量操作**: 支持跨页选择记录
4. **加载动画**: 切换页面时显示加载状态
5. **滚动定位**: 切换页面后自动滚动到顶部

## 📊 数据示例

### 测试用例

| 总记录数 | 每页数量 | 总页数 | 页码显示 |
|----------|----------|--------|----------|
| 5 | 20 | 1 | (无分页) |
| 25 | 20 | 2 | [1] [2] |
| 50 | 20 | 3 | [1] [2] [3] |
| 150 | 20 | 8 | [1] ... [4] [5] [6] ... [8] |
| 150 | 50 | 3 | [1] [2] [3] |
| 150 | 100 | 2 | [1] [2] |

---

**最后更新**: 2025-02-07  
**版本**: 2.0  
**状态**: ✅ 已实现并可用
